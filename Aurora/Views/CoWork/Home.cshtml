
@{
    ViewBag.Title = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="~/Scripts/Aurora.js" type="text/javascript"></script>

<script type="text/javascript">
    $(function(){
        Aurora.mainpageinit();
    })
</script>


<div style='height:28px;width:28px;border-radius: 5px;position:fixed;top:68px;right:30px;z-index:1009; border: 1px dashed grey; border-image: none;text-align:center;cursor:pointer;' data-toggle="tooltip" data-placement="center" title="Create New Topic" onclick="createnewtopic()">
    <span class="glyphicon glyphicon-plus" style="color:grey;font-size:24px;"></span>
    <script type="text/javascript">
        function createnewtopic() {
            window.location.href = '/CoWork/CreateNewTopic'
        }
    </script>
</div>


    <div class="newcontainer">
        <hr style="color:grey;margin-top:1px;margin-bottom:1px;border: 1px solid;border-color:grey"/>

            <nav class="col-sm-2 nav-sidebar">
                <ul class="nav">
                    <li class="cursor-pointer nav-sidebar-icon">
                        <span class="glyphicon glyphicon-menu-hamburger sidebar-show"></span>
                    </li>
                    <li class="active">
                        <a href="#">
                            <span class="glyphicon glyphicon-star" data-toggle="tooltip" title="I-Assign"></span>
                            <span class="item-show">I-Assign</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="glyphicon glyphicon-th-list" data-toggle="tooltip"  title="I-Related"></span>
                            <span class="item-show">I-Related</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="glyphicon glyphicon-blackboard" data-toggle="tooltip" title="Complete"></span>
                            <span class="item-show">Complete</span>
                        </a>
                    </li>
                 </ul>
            </nav>

            <div class="col-sm-3 item-panels" style="padding-left:8px;padding-right:8px;">
                @foreach (var item in ViewBag.iassignlist)
                {
                    var pjworklistcount = item.ProjectWorkingList.Count;
                    var pjdonelistcount = item.ProjectDoneList.Count;
                    var totalpjcount = pjworklistcount + pjdonelistcount;

                <div class="item-panel">
                    <div class="item-title">
                        <div class="item-name">@item.creator</div>
                        <div class="item-op dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                <span class="glyphicon glyphicon-option-vertical" title="Operations" data-toggle="tooltip"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="#">Delete</a>
                                </li>
                                <li>
                                    <a href="#">Complete</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                        <div class="item-content  topiclistcls"  topicid="@item.topicid">
                            <div class="item-date">@item.duedate</div>
                            @if (totalpjcount > 0)
                            {
                            <div class="progress item-progress">
                                @foreach (var pj in item.ProjectDoneList)
                                {
                                    <div class="progress-bar progress-bar-complete" style="width: @(1.0/totalpjcount*100)%">
                                        <span class="sr-only">Complete</span>
                                    </div>
                                }
                                @foreach (var pj in item.ProjectWorkingList)
                                {
                                    <div class="progress-bar progress-bar-working" style="width: @(1.0/totalpjcount*100)%">
                                        <span class="sr-only">Working</span>
                                    </div>
                                }
                            </div>
                            }
                        </div>

                    <div class="item-content  topiclistcls" topicid="@item.topicid" >
                        <div>
                            @item.subject
                        </div>
                    </div>
                </div>
                }

                <div class='itemlistswitchclose'>
                    <span class='glyphicon glyphicon-menu-left' style='margin-top:13px;'></span>
                </div>
            </div>
            <div class="col-sm-7 item-details-show">
                <div class="itemdetailinfo itemdetailhide" style="border-radius: 5px; border: 1px solid grey; border-image: none; margin-right: 2%; min-height:80px;margin-top:5px;">
                </div>
                <div class='itemlistswitchopen hide'>
                    <span class='glyphicon glyphicon-menu-right' style='margin-top:13px;'></span>
                </div>
            </div>

</div>

